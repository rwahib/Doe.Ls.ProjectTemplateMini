// ------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version: 15.0.0.0
//  
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
// ------------------------------------------------------------------------------
namespace Doe.Ls.ProjectTemplate.Data.T4Templates
{
    using Doe.Ls.EntityBase.Helper;
    using System.Linq;
    using System.Text;
    using System.Collections.Generic;
    using System.Xml.Linq;
    using System.Threading;
    using System.Configuration;
    using System;
    
    /// <summary>
    /// Class to produce the template output
    /// </summary>
    
    #line 1 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.TextTemplating", "15.0.0.0")]
    public partial class SettingsTemplate : MVCTemplate.BaseTemplate
    {
#line hidden
        /// <summary>
        /// Create the template output
        /// </summary>
        public override string TransformText()
        {
            this.Write(" \r\n");
            this.Write("using System.Collections.Specialized;\r\nusing System.Configuration;\r\n\r\nnamespace ");
            
            #line 18 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(AppNamespace));
            
            #line default
            #line hidden
            this.Write(".Core.Settings  \r\n{ \r\n    public class PositionEstablishmentSettings  \r\n    {\r\n");
            
            #line 22 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
  XmlParser parser=XmlParser.Parse(XDocument.Load(this.ConfigFile)); 
            
            #line default
            #line hidden
            
            #line 23 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
  string[] classesToSkip= {"appSettings","system.web", "system.webServer"}; 
            
            #line default
            #line hidden
            
            #line 24 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
  foreach(var parserClass in parser.XmlParserClassList){
        if(classesToSkip.Contains(parserClass.ClassName)) continue; 
        GenerateClassCode(parserClass);
} 
            
            #line default
            #line hidden
            this.Write("\r\n    }/*End Class GlobalSettings*/\r\n}/*End namespace*/\r\n");
            return this.GenerationEnvironment.ToString();
        }
        
        #line 31 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
private string CleanPropertyName(string name)
{
    if(string.IsNullOrWhiteSpace(name))return "NULL";
    var cleanName=name.Replace(" ",string.Empty);
	var parts=cleanName.Split('.','_',':','-');
	var cleanBuilder=new StringBuilder();
			
		foreach(var part in parts){
		var pascalCase=string.Empty;
		    if (part.Length == 1)
		    {
		        pascalCase=part.ToUpper();
				
		    }
				else{pascalCase=part[0].ToString().ToUpper()+part.Substring(1,part.Length-2)+part.Last().ToString().ToLower();}
			
			cleanBuilder.Append(pascalCase);	
		}
	
	return cleanBuilder.ToString();
	
	
	}	
 
        
        #line default
        #line hidden
        
        #line 58 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
private void GenerateClassCode(XmlParserClass classParser){
        PushIndent("\t");

        
        #line default
        #line hidden
        
        #line 60 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
this.Write("   \r\n    public static class ");

        
        #line default
        #line hidden
        
        #line 61 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(CleanPropertyName(classParser.ClassName)));

        
        #line default
        #line hidden
        
        #line 61 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
this.Write(" \r\n    {\r\n");

        
        #line default
        #line hidden
        
        #line 63 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"

if(classParser.XmlParserClassList!=null){
            foreach(XmlParserClass cp in classParser.XmlParserClassList){
if(string.IsNullOrWhiteSpace(cp.ClassName))continue;
 GenerateClassCode(cp);
}}


if(classParser.XmlParserItemList!=null){
            foreach(var item in classParser.XmlParserItemList){

    if(string.IsNullOrWhiteSpace(item.PropertyName)||string.IsNullOrWhiteSpace(item.PropertyExpression))continue;

        
        #line default
        #line hidden
        
        #line 76 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
	if(item.PropertyName.ToLower().StartsWith("is") || item.PropertyName.ToLower().StartsWith("use") || item.PropertyName.ToLower() == "debugautoauthentication"){

        
        #line default
        #line hidden
        
        #line 77 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
this.Write("\t\tpublic static bool ");

        
        #line default
        #line hidden
        
        #line 78 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(CleanPropertyName(item.PropertyName)));

        
        #line default
        #line hidden
        
        #line 78 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
this.Write("\r\n        {\r\n\t\t\tget { return ");

        
        #line default
        #line hidden
        
        #line 80 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(item.PropertyExpression));

        
        #line default
        #line hidden
        
        #line 80 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
this.Write(".ToBoolean(); }\r\n        }\r\n");

        
        #line default
        #line hidden
        
        #line 82 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"

}
	else if(item.PropertyName.ToLower() == "appurl"){

        
        #line default
        #line hidden
        
        #line 85 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
this.Write("\t\tpublic static string ");

        
        #line default
        #line hidden
        
        #line 86 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(CleanPropertyName(item.PropertyName)));

        
        #line default
        #line hidden
        
        #line 86 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
this.Write("\r\n        {\r\n            get { return  EntityBase.Http.HttpHelper.GetAppUrl();   " +
        "  }\r\n        }\r\n");

        
        #line default
        #line hidden
        
        #line 90 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"

}else{

        
        #line default
        #line hidden
        
        #line 92 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
this.Write("\r\n        public static string ");

        
        #line default
        #line hidden
        
        #line 94 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(CleanPropertyName(item.PropertyName)));

        
        #line default
        #line hidden
        
        #line 94 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
this.Write("\r\n        {\r\n            get { return  ");

        
        #line default
        #line hidden
        
        #line 96 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
this.Write(this.ToStringHelper.ToStringWithCulture(item.PropertyExpression));

        
        #line default
        #line hidden
        
        #line 96 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
this.Write(";     }\r\n        }\r\n");

        
        #line default
        #line hidden
        
        #line 98 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"

}
}}
        PopIndent();

        
        #line default
        #line hidden
        
        #line 102 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"
this.Write("        }\r\n");

        
        #line default
        #line hidden
        
        #line 104 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"

} 
        
        #line default
        #line hidden
        
        #line 1 "C:\Projects\Doe.Ls.ProjectTemplateMini\Doe.Ls.ProjectTemplate.Data\T4Templates\SettingsTemplate.tt"

private string _ConfigFileField;

/// <summary>
/// Access the ConfigFile parameter of the template.
/// </summary>
private string ConfigFile
{
    get
    {
        return this._ConfigFileField;
    }
}

private string _AppNamespaceField;

/// <summary>
/// Access the AppNamespace parameter of the template.
/// </summary>
private string AppNamespace
{
    get
    {
        return this._AppNamespaceField;
    }
}

private global::System.Data.Entity.DbContext _EntityContextField;

/// <summary>
/// Access the EntityContext parameter of the template.
/// </summary>
private global::System.Data.Entity.DbContext EntityContext
{
    get
    {
        return this._EntityContextField;
    }
}


/// <summary>
/// Initialize the template
/// </summary>
public override void Initialize()
{
    base.Initialize();
    if ((this.Errors.HasErrors == false))
    {
bool ConfigFileValueAcquired = false;
if (this.Session.ContainsKey("ConfigFile"))
{
    this._ConfigFileField = ((string)(this.Session["ConfigFile"]));
    ConfigFileValueAcquired = true;
}
if ((ConfigFileValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("ConfigFile");
    if ((data != null))
    {
        this._ConfigFileField = ((string)(data));
    }
}
bool AppNamespaceValueAcquired = false;
if (this.Session.ContainsKey("AppNamespace"))
{
    this._AppNamespaceField = ((string)(this.Session["AppNamespace"]));
    AppNamespaceValueAcquired = true;
}
if ((AppNamespaceValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("AppNamespace");
    if ((data != null))
    {
        this._AppNamespaceField = ((string)(data));
    }
}
bool EntityContextValueAcquired = false;
if (this.Session.ContainsKey("EntityContext"))
{
    this._EntityContextField = ((global::System.Data.Entity.DbContext)(this.Session["EntityContext"]));
    EntityContextValueAcquired = true;
}
if ((EntityContextValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("EntityContext");
    if ((data != null))
    {
        this._EntityContextField = ((global::System.Data.Entity.DbContext)(data));
    }
}


    }
}


        
        #line default
        #line hidden
    }
    
    #line default
    #line hidden
}
